{% extends "base.html" %}
{% load staticfiles %}

{% block additional-head %}
    <script src="{% static "highcharts.js" %}"></script>
    <script src="{% static "modules/exporting.js" %}"></script>
    <script src="{% static "js/jstree.min.js" %}"></script>
    <script src="{% static "js/require.js" %}"></script>
    <link href="{% static "themes/default/style.min.css" %}" rel="stylesheet">
<script>
function expand(evnt) {
    $('#sidebar-panel').show(0);
    $('#sidebar-panel').animate({width: '400px'});
    $('#sidebar-handle').one('click',shrink);
    $('#sidebar-handle').text('<<');
}
function shrink(evnt) {
    $('#sidebar-panel').animate({width: '0px'}, 400, "swing", function(){
        $('#sidebar-panel').hide(0);
    });
    $('#sidebar-handle').one('click',expand);
    $('#sidebar-handle').text('>>');
}
$(function() {
    Highcharts.setOptions({
        global: { useUTC: false }
    });
    var start = new Date();
    var end = new Date();
    var fmt = "yy-mm-dd";

    start.setDate(start.getDate() - 2);
    $('#start-date').datepicker({dateFormat: "m-d-yy" });
    $('#start-date').val((start.getMonth()+1)+'-'+ start.getDate()+'-'+start.getFullYear());
    $('#end-date').datepicker({ dateFormat: "m-d-yy" });
    $('#end-date').val((end.getMonth()+1)+'-'+ end.getDate()+'-'+end.getFullYear());

	$('#sidebar-panel').hide(0);
    $('#sidebar-handle').one('click', expand);
    $.jstree.defaults.core.data = true;
    $('#sidebar-panel').jstree({'plugins' : ["themes", "ui", "checkbox"],
                                'core' : {
                                    'data' : {
                                        'url': '{% url "station-tree"%}', 
                                        'data': function(node) {
                                        	return {'id': node.id};
                                        }
                                    }
                                }});

})
</script>

{% block init-head %}
{% endblock %}

{% endblock %}

{% block pre-content %}
<div id='sidebar'>
    <div id='sidebar-panel'></div>
    <div id='sidebar-handle' >&gt;&gt;</div>
</div>
<div id='range'>
    Timeframe:
    <input type="text" id="start-date" style="width:6em">
    -
    <input type="text" id="end-date" style="width:6em">
    <button type="button" id="update-btn">Update</button>
</div>
</div>
{% endblock %}
